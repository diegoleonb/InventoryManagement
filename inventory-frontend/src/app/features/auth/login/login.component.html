<main class="login-page">
  <div class="bg-gradient"></div>

  <section class="login-card" role="form" aria-labelledby="login-title">
    <header class="login-header">
      <div class="brand">
        <h1 id="login-title">Sign in</h1>
      </div>
    </header>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form" novalidate>
      <div class="form-field" [class.has-error]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
        <label for="username">Username</label>
        <div class="input-wrapper">
          <input
            type="text"
            id="username"
            formControlName="username"
            class="form-control"
            placeholder="Enter your username"
            autocomplete="username"
            [attr.aria-invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
            [attr.aria-describedby]="loginForm.get('username')?.invalid ? 'username-error' : null">
          <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8V22h19.2v-2.8c0-3.2-6.4-4.8-9.6-4.8z" fill="currentColor"/>
          </svg>
        </div>
        <div id="username-error" class="error-message" *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
          Username is required
        </div>
      </div>

      <div class="form-field" [class.has-error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
        <label for="password">Password</label>
        <div class="input-wrapper">
          <input
            type='password'
            id="password"
            formControlName="password"
            class="form-control"
            placeholder="Enter your password"
            autocomplete="current-password"
            [attr.aria-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
            [attr.aria-describedby]="loginForm.get('password')?.invalid ? 'password-error' : null">
        </div>
        <div id="password-error" class="error-message" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
          Password is required
        </div>
      </div>

      <div class="error-banner" *ngIf="errorMessage" aria-live="polite">
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        class="login-btn"
        [disabled]="loginForm.invalid || isLoading">
        <span class="btn-content" *ngIf="!isLoading">Sign In</span>
        <span class="btn-loading" *ngIf="isLoading">
          <span class="spinner" aria-hidden="true"></span>
          Signing in...
        </span>
      </button>
    </form>

    <details class="demo-accounts" aria-label="Demo Accounts">
      <summary>Demo Accounts</summary>
      <ul class="account-list">
        <li><strong>Administrator:</strong> admin / admin123</li>
        <li><strong>Operator:</strong> operator / operator123</li>
        <li><strong>Viewer:</strong> viewer / viewer123</li>
      </ul>
    </details>
  </section>
</main>
