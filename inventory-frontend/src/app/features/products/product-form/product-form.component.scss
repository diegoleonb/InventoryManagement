:root{
  --card: var(--card-background, rgba(255,255,255,0.92));
  --border: var(--border-color, rgba(0,0,0,.08));
  --ring: #6a8cff;
  --text: var(--text-primary, #0b1220);
  --muted: var(--text-secondary, #64748b);
  --primary: var(--primary-color, #3a66ff);
  --primary-700: var(--primary-dark, #2b4fcc);
  --danger: var(--error-color, #ef4444);
}
@media (prefers-color-scheme: dark){
  :root{
    --card: rgba(18,26,40,0.7);
    --border: rgba(255,255,255,.12);
    --ring: #7aa2ff;
    --text: #e8edf7;
    --muted: #a8b6c8;
    --primary: #7aa2ff;
    --primary-700: #5f85ff;
    --danger: #ff6b6b;
  }
}

.product-form, .category-form{
  max-width: 820px; margin: clamp(10px, 4vw, 28px) auto; padding: 0 16px;

  .form-container{
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,.08), 0 1px 0 rgba(255,255,255,.03) inset;
    backdrop-filter: blur(10px);
    padding: clamp(18px, 3.5vw, 28px);

    h1{ margin: 0 0 6px; color: var(--text); text-align:center; font-size: clamp(1.25rem, 1.1rem + 1vw, 1.6rem) }
    .subtitle{ margin: 0 0 10px; text-align:center; color: var(--muted); .req{ color: var(--danger) } }
  }

  .form{ display:grid; gap:16px }

  .form-group{ display:grid; gap:8px }
  .form-group label{
    font-weight:700; color: var(--text);
    display:inline-flex; align-items:center; gap:6px;
    .req{ color: var(--danger) }
  }


  .input-wrapper{
    position:relative; display:flex; align-items:center;
  }
  .input-wrapper.textarea{ align-items: flex-start }
  .input-icon{
    position:absolute; left: 12px; top: 50%; transform: translateY(-50%);
    opacity:.7; pointer-events:none;
  }
  .input-wrapper.textarea .input-icon{ top: 14px; transform:none }
  .char-counter{
    position:absolute; right:10px; bottom:10px; color: var(--muted); font-size:.8rem;
  }

  .affix-left .prefix{
    position:absolute; left: 12px; top: 50%; transform: translateY(-50%);
    font-weight:800; color: var(--muted);
  }

  .form-control{
    width:100%;
    padding: 12px 44px;
    border-radius:12px;
    border:1px solid var(--border);
    background: rgba(255,255,255,.06);
    color: var(--text);
    font-size: 1rem;
    transition: border-color .15s ease, box-shadow .15s ease, background .2s ease;
    &::placeholder{ color: color-mix(in oklab, var(--muted) 70%, transparent) }
    &:focus{
      outline:none;
      border-color: color-mix(in oklab, var(--ring) 60%, transparent);
      box-shadow: 0 0 0 4px color-mix(in oklab, var(--ring) 25%, transparent);
      background: rgba(255,255,255,.1);
    }
    &.error{
      border-color: color-mix(in oklab, var(--danger) 60%, transparent);
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--danger) 22%, transparent);
    }
  }

  textarea.form-control{ resize: vertical; min-height: 110px; padding: 12px 44px 28px 38px }

  .input-wrapper .form-control{ padding-left: 38px }
  .affix-left .form-control{ padding-left: 38px }

  select.form-control{
    appearance: none; background-image:
      linear-gradient(45deg, transparent 50%, currentColor 50%),
      linear-gradient(135deg, currentColor 50%, transparent 50%);
    background-position: calc(100% - 18px) center, calc(100% - 12px) center;
    background-size: 6px 6px, 6px 6px;
    background-repeat: no-repeat;
    padding-right: 40px;
  }


  .help-text{ color: var(--muted); font-size: .92rem }
  .error-message{ color: var(--danger); font-size: .92rem; font-weight: 600 }
  .form-group.has-error .help-text{ display:none }

  .form-row{
    display:grid; grid-template-columns: 1fr 1fr; gap: 14px;
    @media (max-width: 768px){ grid-template-columns: 1fr }
  }

  .image-preview{ margin-top: .75rem }
  .image-frame{
    width: 100%; max-width: 320px; aspect-ratio: 1 / 1; border-radius: 14px; overflow:hidden;
    border:1px solid var(--border); background: color-mix(in oklab, #fff 70%, transparent);
    box-shadow: 0 10px 20px rgba(0,0,0,.08);
    img{ width:100%; height:100%; object-fit: cover; display:block }
  }
  .image-hint{ margin:.35rem 0 0; color: var(--muted); font-size:.85rem }

  .form-actions{
    display:flex; gap:10px; justify-content:flex-end;
    margin-top:10px; padding-top:16px; border-top:1px dashed var(--border);
    @media (max-width: 600px){ flex-direction:column; align-items:stretch }
  }
  .btn{
    appearance:none; user-select:none;
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    padding:10px 16px; border-radius:12px; font-weight:700; letter-spacing:.2px;
    border:1px solid transparent; cursor:pointer; transition: transform .12s ease, filter .2s ease, box-shadow .2s ease;
    text-decoration:none;
    &:focus-visible{ outline:2px solid var(--primary); outline-offset:3px }
    &:disabled{ opacity:.6; cursor:not-allowed; filter:grayscale(.1) }
  }
  .btn-primary{
    background: linear-gradient(180deg, var(--primary), var(--primary-700));
    color:#000;
    box-shadow: 0 10px 20px rgba(0,0,0,.16), 0 2px 0 rgba(255,255,255,.06) inset;
    &:hover{ transform: translateY(-1px); filter:saturate(110%) }
    &:active{ transform: translateY(0) }
  }
  .btn-secondary{
    background: transparent; color: var(--text); border:1px solid var(--border);
    &:hover{ background: rgba(255,255,255,.06) }
  }
  .btn-loading{ display:inline-flex; align-items:center; gap:10px }
  .spinner{
    width:16px; height:16px; border-radius:50%;
    border:2px solid rgba(0,0,0,.35); border-top-color:#000; animation: spin .8s linear infinite;
  }


  @keyframes spin{ to{ transform: rotate(360deg) } }
}
